(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=n(2),l=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.newFilter,onChange:function(t){console.log("Filter: ",t.target.value),e.setNewFilter(t.target.value)}}))},s=n(3),i=n.n(s),m="/api/persons",d=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},b=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},p=function(e){return i.a.delete("".concat(m,"/").concat(e))},w=function(e){var t=e.persons,n=e.setPersons,a=e.newName,o=e.setNewName,c=e.newNumber,u=e.setNewNumber,l=e.setMessage,s=e.setError;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("App, addPerson..");var r={name:a,number:c},i=t.find((function(e){return e.name.toLowerCase()===a.toLowerCase()}));console.log("findPerson result: ",t.find((function(e){return e.name===a}))),void 0!==i?(window.alert("".concat(a," is already added to phonebook, replace the old\n            number with a new one?")),b(i.id,r).then((function(e){n(t.map((function(t){return t.id!==i.id?t:e}))),s(!1),l("Updated ".concat(i.name,"'s number"))})).catch((function(e){s(!0),l("".concat(i.name," was already deleted from server"))})),setTimeout((function(){l(null)}),4e3)):(f(r).then((function(e){n(t.concat(e)),o(""),u(""),s(!1),l("Added ".concat(e.name))})).catch((function(e){s(!0),l(e.response.data.error)})),setTimeout((function(){l(null)}),4e3))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){console.log("Name:",e.target.value),o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:function(e){console.log("Number:",e.target.value),u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.persons,n=e.setPersons,a=e.newFilter,o=e.setMessage,c=e.setError,u=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));return r.a.createElement("div",null,u.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:(a=e.id,u=e.name,function(){window.confirm("delete ".concat(u,"?"))&&(p(a).catch((function(e){c(!0),o("".concat(u," was already deleted from server"))})),c(!1),o("Deleted ".concat(u)),setTimeout((function(){o(null)}),4e3),n(t.filter((function(e){return e.id!==a}))))})},"delete"));var a,u})))},E=function(e){var t=e.message,n=e.error;return null===t?null:r.a.createElement("div",{className:n?"error":"notification"},t)},h=function(){console.log("App starts..");var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),i=s[0],m=s[1],f=Object(a.useState)(""),b=Object(u.a)(f,2),p=b[0],h=b[1],g=Object(a.useState)(""),N=Object(u.a)(g,2),j=N[0],O=N[1],C=Object(a.useState)(null),F=Object(u.a)(C,2),P=F[0],S=F[1],k=Object(a.useState)(!1),y=Object(u.a)(k,2),L=y[0],M=y[1];return Object(a.useEffect)((function(){console.log("effect"),d().then((function(e){o(e)}))}),[]),console.log("render",n.length,"persons"),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{message:P,error:L}),r.a.createElement(l,{newFilter:j,setNewFilter:O}),r.a.createElement("h2",null,"add a new"),r.a.createElement(w,{persons:n,setPersons:o,newName:i,setNewName:m,newNumber:p,setNewNumber:h,setMessage:S,setError:M}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(v,{persons:n,setPersons:o,newFilter:j,setMessage:S,setError:M}))};n(36);c.a.render(r.a.createElement(h,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f8946b1d.chunk.js.map